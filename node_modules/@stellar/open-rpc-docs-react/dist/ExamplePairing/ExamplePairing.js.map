{"version":3,"file":"ExamplePairing.js","sourceRoot":"","sources":["../../src/ExamplePairing/ExamplePairing.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport type { JSX } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport {\n  ExampleObject,\n  ExamplePairingObject,\n  MethodObjectParamStructure,\n  ExamplePairingObjectResult,\n} from '@open-rpc/meta-schema';\nimport _ from 'lodash';\nimport MarkdownDescription from '../MarkdownDescription/MarkdownDescription';\n\ninterface IProps {\n  examplePairing?: ExamplePairingObject;\n  paramStructure?: MethodObjectParamStructure;\n  components?: {\n    CodeBlock: React.FC<{ children: string; className?: string }>;\n    Tabs?: React.FC<{ children: JSX.Element | JSX.Element[]; groupId: string }>;\n    TabItem?: React.FC<{ children: JSX.Element; value: string; label: string }>;\n  };\n  methodName?: string;\n  uiSchema?: any;\n  reactJsonOptions?: any;\n}\n\nclass ExamplePairing extends Component<IProps, {}> {\n  public render() {\n    const { examplePairing, paramStructure, methodName, uiSchema, components } =\n      this.props;\n    if (_.isUndefined(examplePairing)) {\n      return null;\n    }\n    if (_.isUndefined(methodName)) {\n      return null;\n    }\n    const params =\n      paramStructure === 'by-name'\n        ? (examplePairing.params as ExampleObject[]).reduce((memo, p) => {\n            memo[p.name] = p.value;\n            return memo;\n          }, {} as any)\n        : (examplePairing.params as ExampleObject[]).map((p) => p.value);\n\n    const methodCall = {\n      jsonrpc: '2.0',\n      id: 8675309,\n      method: methodName,\n      params,\n    };\n\n    if (Object.keys(params).length === 0) {\n      delete methodCall.params;\n    }\n    const resultObj = {\n      jsonrpc: '2.0',\n      id: 8675309,\n      result: (examplePairing.result as ExampleObject).value,\n    };\n    const serverUrl = methodName.indexOf('_') > -1\n      ? 'https://platform-server.exampleanchor.com'\n      : 'https://soroban-testnet.stellar.org'\n    const curlCode = `curl -X POST \\\\\n-H 'Content-Type: application/json' \\\\\n-d '${JSON.stringify(methodCall, null, 2)}' \\\\\n${serverUrl} | jq`;\n    const jsCode = `let requestBody = ${JSON.stringify(methodCall, null, 2)}\nlet res = await fetch('${serverUrl}', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify(requestBody),\n})\nlet json = await res.json()\nconsole.log(json)`;\n\n    const pythonCode = `import json, requests\nres = requests.post(${serverUrl}, json=${JSON.stringify(\n      methodCall,\n      null,\n      4,\n    )})\nprint(json.dumps(res.json(), indent=4))`;\n\n    return (\n      <div>\n        <div>\n          <MarkdownDescription\n            uiSchema={uiSchema}\n            source={examplePairing.description || ''}\n            className=\"example-pairing-description\"\n          />\n        </div>\n        <div>\n          <div>\n            <h3>Request</h3>\n            <div>\n              {components &&\n                components.CodeBlock &&\n                components.Tabs &&\n                components.TabItem && (\n                  <components.Tabs groupId=\"rpc-examples\">\n                    <components.TabItem value=\"curl\" label=\"cURL\">\n                      <components.CodeBlock className=\"language-bash\">\n                        {curlCode}\n                      </components.CodeBlock>\n                    </components.TabItem>\n                    <components.TabItem value=\"javascript\" label=\"JavaScript\">\n                      <components.CodeBlock className=\"language-js\">\n                        {jsCode}\n                      </components.CodeBlock>\n                    </components.TabItem>\n                    <components.TabItem value=\"python\" label=\"Python\">\n                      <components.CodeBlock className=\"language-python\">\n                        {pythonCode}\n                      </components.CodeBlock>\n                    </components.TabItem>\n                    <components.TabItem value=\"json\" label=\"JSON\">\n                      <components.CodeBlock className=\"language-json\">\n                        {JSON.stringify(methodCall, null, 2)}\n                      </components.CodeBlock>\n                    </components.TabItem>\n                  </components.Tabs>\n                )}\n              {!components?.CodeBlock && (\n                <pre>\n                  <code>{curlCode}</code>\n                </pre>\n              )}\n            </div>\n          </div>\n        </div>\n        <div>\n          <div>\n            <h3>Result</h3>\n            <div>\n              {components && components.CodeBlock && (\n                <components.CodeBlock className=\"language-json\">\n                  {JSON.stringify(resultObj, null, '  ')}\n                </components.CodeBlock>\n              )}\n              {!components?.CodeBlock && (\n                <pre>\n                  <code>{JSON.stringify(resultObj)}</code>\n                </pre>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ExamplePairing;\n"]}